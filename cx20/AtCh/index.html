<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>[WebGL] Grimoire.js で render-quad を使ってシェーダを実行してみるテスト - js do it</title>
<meta name="Description" content="" />
<meta name="Keywords"  content="" />

<link rel="stylesheet" type="text/css" media="screen,print" href="style.css" />
</head>
<body>
<!-- generated by: jsdo.it - http://jsdo.it/cx20/AtCh -->
<!-- Copyright cx20 - http://jsdo.it/cx20 -->
<!-- Licensed under MIT License - http://www.opensource.org/licenses/mit-license.php -->
<!-- grimoire-preset-basic.js v1.10.16 -->
<script src="https://unpkg.com/grimoirejs-preset-basic@1.10.16/register/grimoire-preset-basic.js"></script>

<script type="text/sort" id="shader" typeName="shader">
@Pass{
FS_PREC(highp,float)
#ifdef VS
  attribute vec3 position;
  void main(){
    gl_Position = vec4(position, 1.);
  }
#endif

#ifdef FS
  // forked from http://glslsandbox.com/e#40209.0
  uniform float _time;
  uniform vec2 _viewportSize;

  void main( void ) {
    vec2 p = (gl_FragCoord.xy * 2.0 - _viewportSize) / min(_viewportSize.x, _viewportSize.y);
    vec3 destcolor = vec3(0.0, 0.1, 0.7);
    
    float f = 0.0;
    for(float i = 0.0; i < 2.0; i++){
      float s = sin(_time / 1000.0 + f * 0.728318 * 1000.0) *1.8 ;
      float c = cos(_time / 1000.0 + i * 0.628318) * 2.8;
      f += 0.005 /abs(length(p / vec2(c, s)) - 0.5);
    }
    
    gl_FragColor = vec4(vec3(destcolor * f), 1.0);
  }
#endif
}
</script>
<script type="text/goml" id="canvas">
<goml width="fit" height="fit">
  <!-- <import-material typeName="shader" src="index.sort"/> -->
  <renderer>
    <render-quad material="new(shader)"/>
  </renderer>
</goml>
</script>



<script type="text/javascript" src="index.js"></script>
</body>
</html>
