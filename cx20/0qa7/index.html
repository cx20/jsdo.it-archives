<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>[WebVR] three.js で WebVR を試してみるテスト（その５）（調整中） - js do it</title>
<meta name="Description" content="" />
<meta name="Keywords"  content="" />

<link rel="stylesheet" type="text/css" media="screen,print" href="style.css" />
</head>
<body>
<!-- generated by: jsdo.it - http://jsdo.it/cx20/0qa7 -->
<!-- Copyright cx20 - http://jsdo.it/cx20 -->
<!-- Licensed under MIT License - http://www.opensource.org/licenses/mit-license.php -->
<div id="container"></div>

<!-- three.js  -->
<script src="https://rawcdn.githack.com/mrdoob/three.js/r93/build/three.js"></script>
<script src="https://rawcdn.githack.com/mrdoob/three.js/r93/examples/js/vr/GearVRController.js"></script>
<script src="https://rawcdn.githack.com/mrdoob/three.js/r93/examples/js/vr/WebVR.js"></script>

<script type="x-shader/x-vertex" id="vs">
uniform float f1;
uniform float f2;
uniform float f3;
uniform float f4;
uniform float p1;
varying vec4 vColor;

float A1 = 50.0,                 d1 = 0.02;
float A2 = 50.0, p2 = 3.0/2.0,   d2 = 0.0315;
float A3 = 50.0, p3 = 13.0/15.0, d3 = 0.02;
float A4 = 50.0, p4 = 1.0,       d4 = 0.02;
float PI = 3.141592;

vec3 hsv(float h, float s, float v){
    vec4 t = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);
    vec3 p = abs(fract(vec3(h) + t.xyz) * 6.0 - vec3(t.w));
    return v * mix(vec3(t.x), clamp(p - vec3(t.x), 0.0, 1.0), s);
}

void main()
{
    vec3 p = position;
    float t = p.x;
    float x = A1 * sin(f1 * t + PI * p1) * exp(-d1 * t) + A2 * sin(f2 * t + PI * p2) * exp(-d2 * t);
    float y = A3 * sin(f3 * t + PI * p3) * exp(-d3 * t) + A4 * sin(f4 * t + PI * p4) * exp(-d4 * t);
    float z = A1 * cos(f1 * t + PI * p1) * exp(-d1 * t) + A2 * cos(f2 * t + PI * p2) * exp(-d2 * t);
    p.x = x;
    p.y = y;
    p.z = z;

    vec4 mvPosition = modelViewMatrix * vec4( p, 1.0 );
    gl_Position = projectionMatrix * mvPosition;
    vColor = vec4(hsv(t/100.0, 1.0, 1.0), 1.0);
}
</script>

<script type="x-shader/x-fragment" id="fs">
precision mediump float;

varying vec4 vColor;

void main() {
    gl_FragColor = vColor;
}
</script>


<script type="text/javascript" src="index.js"></script>
</body>
</html>
