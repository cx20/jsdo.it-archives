<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>[WebVR] A-Frame で WebVR を試してみるテスト（その７）（調整中） - js do it</title>
<meta name="Description" content="" />
<meta name="Keywords"  content="" />

<link rel="stylesheet" type="text/css" media="screen,print" href="style.css" />
</head>
<body>
<!-- generated by: jsdo.it - http://jsdo.it/cx20/Qb57 -->
<!-- Copyright cx20 - http://jsdo.it/cx20 -->
<!-- Licensed under MIT License - http://www.opensource.org/licenses/mit-license.php -->
<!-- aframe.js v0.8.2 -->
<script src="https://unpkg.com/aframe@0.8.2"></script>

<script>
AFRAME.registerComponent('earth', {
  schema: {
  },

  init: function () {
    var data = this.data;
    var el = this.el;

    this.geometry = new THREE.SphereGeometry(1, 30, 30);
    let planetTexture = THREE.ImageUtils.loadTexture('/assets/4/i/b/A/4ibAL.jpg'); // earth_atmos_1024.jpg
    let normalTexture = THREE.ImageUtils.loadTexture('/assets/A/b/2/p/Ab2pP.jpg'); // earth_normal_1024.jpg
    let specularTexture = THREE.ImageUtils.loadTexture('/assets/w/N/j/h/wNjh6.jpg'); // earth_specular_1024.jpg
    this.material = new THREE.MeshPhongMaterial({
        map: planetTexture,
        normalMap: normalTexture,
        specularMap: specularTexture,
        color: 0xffffff,
        specular: 0x111111,
        shininess: 20
    });
    this.mesh = new THREE.Mesh(this.geometry, this.material);

    el.setObject3D('mesh', this.mesh);
  },
});

AFRAME.registerComponent('cloud', {
  schema: {
  },

  init: function () {
    var data = this.data;
    var el = this.el;

    this.geometry = new THREE.SphereGeometry(1.01, 30, 30);
    let cloudsTexture = THREE.ImageUtils.loadTexture('/assets/n/l/9/m/nl9m8.png'); // earth_clouds_1024.png
    this.material = new THREE.MeshLambertMaterial({
        color: 0xffffff,
        map: cloudsTexture,
        transparent: true
    });
    this.mesh = new THREE.Mesh(this.geometry, this.material);

    el.setObject3D('mesh', this.mesh);
  },
});
</script>

<a-scene>
    <a-sky color="#000000"></a-sky>    
    <a-entity position="0 0 1">
        <a-camera></a-camera>
    </a-entity>
    <a-entity earth position="0 1.5 -1">
        <a-animation easing="linear" attribute="rotation" dur="20000" to="0 360 0" repeat="indefinite"></a-animation>
    </a-entity>
    <a-entity cloud position="0 1.5 -1">
        <a-animation easing="linear" attribute="rotation" dur="15000" to="0 360 0" repeat="indefinite"></a-animation>
    </a-entity>
</a-scene>


<script type="text/javascript" src="index.js"></script>
</body>
</html>
